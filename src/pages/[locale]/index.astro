---
import { i18n } from '../../../i18n'
import client from '../../../tina/__generated__/client'
import Layout from '../../layouts/Layout.astro'
import HomePage from '../../../tina/pages/HomePage'

export async function getStaticPaths() {
    const locales = i18n.locales.filter(locale => locale !== i18n.defaultLocale)
    return locales.map(locale => ({
        params: { locale },
    }))
}

const { locale } = Astro.params
if (!locale || !i18n.locales.includes(locale)) {
    return Astro.redirect('/')
}
const data = await client.queries.page({ relativePath: `${locale}/home.mdx` })
---

<Layout locale={locale} title={data.data.page.seoTitle}>
    <HomePage {...data} client:tina />
</Layout>
