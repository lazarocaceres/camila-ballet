---
import { i18n } from 'i18n'
import client from 'tina/__generated__/client'
import Layout from 'layouts/Layout.astro'
import Page from 'tina/pages/Page'

export async function getStaticPaths() {
    const locales = i18n.locales.filter(locale => locale !== i18n.defaultLocale)
    return locales.map(locale => ({
        params: { locale },
    }))
}

const { locale } = Astro.params
const data = await client.queries.page({ relativePath: `${locale}/home.md` })
---

<Layout locale={locale} title={data.data.page.title} description={data.data.page.description}>
    <Page {...data} client:load />
</Layout>
